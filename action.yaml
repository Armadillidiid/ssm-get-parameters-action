name: "ssm-get-parameters-action"
description: "Fetches parameters from AWS Systems Manager (SSM) Parameter Store and exports them as environment variables. Supports optional filtering based on a specified prefix."
author: "armadillidiid"

branding:
  icon: "sliders"
  color: "orange"

inputs:
  secret:
    description: "Resolve AWS SSM parameters provided as key value pairs or JSON."
    required: true
    default: "World"
  with-decryption:
    description: "If set to true, retrieves decrypted values for secure string parameters."
    required: false
    default: "false"
  parameter-prefix:
    description: "An optional prefix to filter SSM parameter names. Only parameters matching this prefix will be fetched."
    required: false
    default: ""
  env-file-path:
    description: "The file path where the environment variables will be saved. Defaults to `./`."
    required: false
    default: "./"
  is-json:
    description: "Indicates whether the provided secret is in JSON format. Set to true if the secret is a JSON object."
    required: false
    default: "false"

outputs:
  env:
    description: "A JSON stringified object containing the environment variables fetched from SSM."

runs:
  using: "node20"
  main: "dist/index.js"
